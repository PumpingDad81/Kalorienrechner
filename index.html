<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ThePumpingDad ‚Äì Kalorienrechner</title>
  <style>
    :root{
      --bg:#d2ecb8;
      --ink:#255b43;
      --ink2:#1f4c38;
      --paper:#f7fff1;
      --shadow: rgba(0,0,0,.16);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Helvetica Neue", Helvetica, sans-serif;
      background: var(--bg);
      color:var(--ink);
    }
    .wrap{max-width:1100px;margin:0 auto;padding:16px 12px 28px;}
    .grid{display:grid;grid-template-columns:1fr;gap:12px;margin-top:12px;}
    @media (min-width: 980px){ .grid{grid-template-columns:1.05fr .95fr;gap:14px;} }

    /* HEADER */
    .banner{
      border:3px solid var(--ink);
      background: rgba(247,255,241,.75);
      border-radius:18px;
      box-shadow: 0 10px 0 var(--ink2), 0 18px 26px var(--shadow);
      padding:14px 16px;
      text-align:center;
    }
    .brandTop{
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:10px;
    }
    .brandLogo{
      width:64px;
      height:64px;
      border-radius:16px;
      border:2px solid var(--ink);
      background: rgba(255,255,255,.85);
      box-shadow: 0 6px 0 var(--ink2);
      display:grid;
      place-items:center;
      overflow:hidden;
    }
    .brandLogo img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }
    h1{
      margin:0;
      font-size:26px;
      line-height:1.05;
      letter-spacing:.4px;
      text-transform:uppercase;
      font-weight:1000;
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 12px;
      border:2px solid var(--ink);
      border-radius:999px;
      background: rgba(210,236,184,.65);
      box-shadow: 0 6px 0 var(--ink2);
      font-weight:1000;
      letter-spacing:.5px;
      text-transform:uppercase;
      font-size:12px;
      margin-bottom:2px;
    }
    .socialRow{
      margin-top:8px;
      display:flex;
      justify-content:center;
      gap:10px;
      flex-wrap:wrap;
    }
    .igLink{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      padding:12px 16px;
      border:2px solid var(--ink);
      border-radius:999px;
      background: rgba(247,255,241,.92);
      box-shadow: 0 6px 0 var(--ink2);
      color:var(--ink);
      text-decoration:none;
      font-weight:1000;
      letter-spacing:.6px;
      font-size:12px;
      text-transform:uppercase;
    }
    .igLink:active{
      transform: translateY(2px);
      box-shadow: 0 4px 0 var(--ink2);
    }
    .igIconBox{
      width:30px;
      height:30px;
      border-radius:999px;
      border:2px solid var(--ink);
      background: rgba(255,255,255,.95);
      display:grid;
      place-items:center;
      overflow:hidden;
    }
    .igIcon{
      width:18px;
      height:18px;
      display:block;
    }

    /* CARDS */
    .card{
      background: rgba(247,255,241,.82);
      border:2px solid var(--ink);
      border-radius:18px;
      box-shadow: 0 10px 0 var(--ink2), 0 18px 26px var(--shadow);
      padding:14px;
    }
    .card h2{
      margin:0 0 10px;
      font-size:15px;
      text-transform:uppercase;
      letter-spacing:.7px;
      font-weight:1000;
    }

    .row{display:grid;grid-template-columns:1fr;gap:10px;}
    @media (min-width:560px){ .row{grid-template-columns:1fr 1fr;} }

    label{
      font-size:12px;
      font-weight:1000;
      text-transform:uppercase;
      letter-spacing:.6px;
      display:block;
      margin:0 0 6px;
    }
    input, select{
      width:100%;
      padding:12px 12px;
      border:2px solid var(--ink);
      border-radius:14px;
      background: rgba(255,255,255,.94);
      color:var(--ink);
      font-weight:900;
      outline:none;
      font-size:16px; /* iOS Zoom verhindern */
    }
    input:focus, select:focus{box-shadow: 0 0 0 3px rgba(37,91,67,.18);}

    .seg{display:flex;gap:8px;}
    .seg button{
      flex:1;
      border:2px solid var(--ink);
      background: rgba(255,255,255,.78);
      color:var(--ink);
      padding:12px;
      border-radius:14px;
      font-weight:1000;
      cursor:pointer;
      box-shadow: 0 6px 0 var(--ink2);
      text-transform:uppercase;
      letter-spacing:.6px;
      font-size:12px;
      touch-action: manipulation;
    }
    .seg button.active{
      background: rgba(210,236,184,.95);
    }
    .seg button:active{
      transform: translateY(2px);
      box-shadow: 0 4px 0 var(--ink2);
    }

    .sliderWrap{
      display:grid;
      grid-template-columns:1fr;
      gap:10px;
      align-items:center;
    }
    @media (min-width:560px){ .sliderWrap{grid-template-columns:1fr 160px;} }
    input[type="range"]{padding:0;border:none;background:transparent;height:28px;}

    .subhint{
      margin-top:6px;
      font-size:11px;
      font-weight:1000;
      letter-spacing:.4px;
      opacity:.9;
      text-transform:none;
    }

    .warn{
      margin-top:10px;
      border:2px dashed var(--ink);
      background: rgba(210,236,184,.75);
      padding:10px;
      border-radius:14px;
      font-size:12px;
      font-weight:1000;
    }

    .kpiGrid{display:grid;grid-template-columns:1fr;gap:10px;}
    @media (min-width:560px){ .kpiGrid{grid-template-columns:1fr 1fr;} }

    .kpi{
      border:2px solid var(--ink);
      border-radius:16px;
      padding:10px;
      background: rgba(255,255,255,.82);
      box-shadow: 0 6px 0 var(--ink2);
    }
    .kpi .lab{
      font-size:11px;
      font-weight:1100;
      text-transform:uppercase;
      letter-spacing:.8px;
      opacity:.95;
    }
    .kpi .val{
      font-size:20px;
      font-weight:1200;
      margin-top:2px;
    }

    .barBlock{
      margin-top:12px;
      border:2px solid var(--ink);
      border-radius:18px;
      padding:12px;
      background: rgba(255,255,255,.72);
    }
    .barTitle{
      display:flex;
      justify-content:space-between;
      gap:10px;
      align-items:baseline;
      margin-bottom:8px;
      font-weight:1100;
      text-transform:uppercase;
      letter-spacing:.7px;
      font-size:12px;
      flex-wrap:wrap;
    }
    .bar{
      height:16px;
      border-radius:999px;
      border:2px solid var(--ink);
      background: rgba(247,255,241,.95);
      overflow:hidden;
    }
    .fill{
      height:100%;
      width:0%;
      background: var(--ink);
      opacity:.85;
      transition: width .25s ease;
    }
    .mini{
      margin-top:10px;
      display:grid;
      grid-template-columns:1fr;
      gap:8px;
      font-size:12px;
      font-weight:1100;
    }
    @media (min-width:560px){ .mini{grid-template-columns:1fr 1fr 1fr;} }
    .pill{
      border:2px solid var(--ink);
      border-radius:999px;
      padding:10px 10px;
      background: rgba(247,255,241,.92);
      box-shadow: 0 6px 0 var(--ink2);
      text-align:center;
      white-space:nowrap;
    }

    .bigTime{
      margin-top:12px;
      border:3px solid var(--ink);
      border-radius:18px;
      background: rgba(210,236,184,.85);
      box-shadow: 0 10px 0 var(--ink2), 0 18px 26px var(--shadow);
      padding:14px;
      text-align:center;
    }
    .bigTime .t1{
      font-size:12px;
      text-transform:uppercase;
      letter-spacing:.8px;
      font-weight:1100;
      margin-bottom:6px;
    }
    .bigTime .t2{
      font-size:22px;
      font-weight:1300;
      line-height:1.2;
    }
    @media (min-width:560px){
      .bigTime .t2{font-size:26px;}
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="banner">
      <div class="brandTop">
        <!-- Optional: PumpingDad Logo (wenn vorhanden) -->
        <!-- Lege pumpingdad-logo.png neben die index.html, dann wird es angezeigt -->
        <div class="brandLogo" title="ThePumpingDad">
          <img src="pumpingdad-logo.png" alt="ThePumpingDad Logo" onerror="this.parentElement.style.display='none';">
        </div>

        <div class="badge">üèãÔ∏è THE PUMPINGDAD</div>
        <h1>Kalorienrechner</h1>

        <div class="socialRow">
          <a class="igLink" href="https://www.instagram.com/thepumpingdad/" target="_blank" rel="noopener noreferrer">
            <span class="igIconBox">
              <img class="igIcon" src="instagram-logo.png" alt="Instagram">
            </span>
            Instagram
          </a>
        </div>
      </div>
    </div>

    <div class="grid">
      <!-- Inputs -->
      <div class="card">
        <h2>Eingaben</h2>

        <div style="margin-bottom:10px;">
          <label>Geschlecht</label>
          <div class="seg">
            <button id="sexM" class="active" type="button">M√§nnlich</button>
            <button id="sexF" type="button">Weiblich</button>
          </div>
        </div>

        <div class="row">
          <div>
            <label for="age">Alter (Jahre)</label>
            <input id="age" type="number" min="10" max="99" value="35" />
          </div>
          <div>
            <label for="height">Gr√∂√üe (cm)</label>
            <input id="height" type="number" min="120" max="230" value="175" />
          </div>
        </div>

        <div class="row" style="margin-top:10px;">
          <div>
            <label for="weight">Aktuelles Gewicht (kg)</label>
            <input id="weight" type="number" min="35" max="250" value="80" step="0.1" />
          </div>
          <div>
            <label for="goal">Wunschgewicht (kg)</label>
            <input id="goal" type="number" min="35" max="250" value="75" step="0.1" />
          </div>
        </div>

        <div class="row" style="margin-top:10px;">
          <div>
            <label for="steps">Schritte pro Tag</label>
            <input id="steps" type="number" min="0" max="40000" step="100" value="8000" />
          </div>
          <div>
            <label for="fatInput">Fett (g/kg)</label>
            <div class="sliderWrap">
              <input id="fatSlider" type="range" min="0" max="3" step="0.1" value="0.9" />
              <input id="fatInput" type="number" min="0" max="3" step="0.1" value="0.9" />
            </div>
            <div class="subhint">0.0 bis 3.0 g/kg</div>
          </div>
        </div>

        <div style="margin-top:12px;">
          <label>Training pro Woche (Minuten)</label>
          <div class="row">
            <div>
              <label for="strengthMin" style="font-size:11px;opacity:.95;">Krafttraining</label>
              <input id="strengthMin" type="number" min="0" max="2000" step="10" value="180" />
            </div>
            <div>
              <label for="cardioModMin" style="font-size:11px;opacity:.95;">
                Cardio moderat <span id="hrMod" style="text-transform:none; font-weight:1100; opacity:.85;"></span>
              </label>
              <input id="cardioModMin" type="number" min="0" max="2000" step="10" value="60" />
            </div>
          </div>
          <div class="row" style="margin-top:10px;">
            <div>
              <label for="cardioHardMin" style="font-size:11px;opacity:.95;">
                Cardio intensiv <span id="hrHard" style="text-transform:none; font-weight:1100; opacity:.85;"></span>
              </label>
              <input id="cardioHardMin" type="number" min="0" max="2000" step="10" value="0" />
            </div>
            <div></div>
          </div>
        </div>

        <div style="margin-top:12px;">
          <label>Modus</label>
          <div class="seg">
            <button id="modeDef" class="active" type="button">Defizit vorgeben</button>
            <button id="modeTime" type="button">Zielzeit vorgeben</button>
          </div>
        </div>

        <div id="deficitBlock" style="margin-top:12px;">
          <label>Kaloriendefizit (kcal/Tag)</label>
          <div class="sliderWrap">
            <input id="defSlider" type="range" min="0" max="1200" step="25" value="500" />
            <input id="defInput" type="number" min="0" max="1200" step="25" value="500" />
          </div>
        </div>

        <div id="timeBlock" style="margin-top:12px; display:none;">
          <label>Zielzeit bis Wunschgewicht (Wochen)</label>
          <div class="sliderWrap">
            <input id="weeksSlider" type="range" min="1" max="104" step="1" value="12" />
            <input id="weeksInput" type="number" min="1" max="104" step="1" value="12" />
          </div>
        </div>

        <div id="warnBox" class="warn" style="display:none;"></div>
      </div>

      <!-- Results -->
      <div class="card">
        <h2>Ergebnisse</h2>

        <div class="kpiGrid">
          <div class="kpi">
            <div class="lab">Grundumsatz (BMR)</div>
            <div class="val" id="bmrKpi">‚Äì</div>
          </div>

          <div class="kpi">
            <div class="lab">NEAT (Schritte)</div>
            <div class="val" id="neatKpi">‚Äì</div>
          </div>

          <div class="kpi">
            <div class="lab">Trainingsumsatz (EAT)</div>
            <div class="val" id="eatKpi">‚Äì</div>
          </div>

          <div class="kpi">
            <div class="lab">Thermischer Effekt (TEF)</div>
            <div class="val" id="tefKpi">‚Äì</div>
          </div>

          <div class="kpi">
            <div class="lab">Gesamtumsatz ohne TEF (TDEE)</div>
            <div class="val" id="tdeeKpi">‚Äì</div>
          </div>

          <div class="kpi">
            <div class="lab">Gesamtumsatz mit TEF (TEE)</div>
            <div class="val" id="teeKpi">‚Äì</div>
          </div>
        </div>

        <div class="barBlock">
          <div class="barTitle">
            <span>Kalorienziel</span>
            <span id="targetLine">‚Äì</span>
          </div>
          <div class="bar"><div class="fill" id="targetFill"></div></div>

          <div class="mini">
            <div class="pill" id="bmrPill">üî• BMR: ‚Äì</div>
            <div class="pill" id="neatPill">üßç NEAT: ‚Äì</div>
            <div class="pill" id="eatPill">üèãÔ∏è EAT: ‚Äì</div>
          </div>
        </div>

        <div class="barBlock">
          <div class="barTitle">
            <span>Makros pro Tag</span>
            <span id="macroCalsLine">‚Äì</span>
          </div>

          <div class="mini">
            <div class="pill" id="pPill">ü•© Eiwei√ü: ‚Äì</div>
            <div class="pill" id="fPill">ü•ë Fett: ‚Äì</div>
            <div class="pill" id="cPill">üçû KH: ‚Äì</div>
          </div>

          <div style="margin-top:10px; display:grid; gap:8px;">
            <div>
              <div class="barTitle"><span>Eiwei√ü</span><span id="pCal">‚Äì</span></div>
              <div class="bar"><div class="fill" id="pFill"></div></div>
            </div>
            <div>
              <div class="barTitle"><span>Fett</span><span id="fCal">‚Äì</span></div>
              <div class="bar"><div class="fill" id="fFill"></div></div>
            </div>
            <div>
              <div class="barTitle"><span>Kohlenhydrate</span><span id="cCal">‚Äì</span></div>
              <div class="bar"><div class="fill" id="cFill"></div></div>
            </div>
          </div>
        </div>

        <div class="bigTime">
          <div class="t1" id="bigTimeLabel">Zeit bis Wunschgewicht</div>
          <div class="t2" id="bigTimeValue">‚Äì</div>
        </div>

      </div>
    </div>
  </div>

<script>
  const $ = (id) => document.getElementById(id);
  const round = (n) => Math.round(n);
  const clamp = (n, min, max) => Math.max(min, Math.min(max, n));
  const fmt = (n) => new Intl.NumberFormat("de-DE").format(n);

  let sex = "m";
  let mode = "def"; // "def" | "time"

  // Fix: TEF = 10%
  const TEF_RATE = 0.10;

  // MET Werte
  const MET_STRENGTH = 6;
  const MET_CARDIO_MOD = 7;
  const MET_CARDIO_HARD = 10;

  // Mifflin-St Jeor
  function mifflinBMR(sex, wKg, hCm, age){
    const s = (sex === "m") ? 5 : -161;
    return (10 * wKg) + (6.25 * hCm) - (5 * age) + s;
  }

  // NEAT aus Schritten (Heuristik)
  // kcal ‚âà steps * weight * 0.0005
  function neatFromSteps(steps, weightKg){
    return steps * weightKg * 0.0005;
  }

  // EAT aus Trainingsminuten/Woche (MET-Ansatz), umgerechnet auf pro Tag
  function eatFromTraining(weightKg, strengthMin, cardioModMin, cardioHardMin){
    const hoursStrength = strengthMin / 60;
    const hoursMod = cardioModMin / 60;
    const hoursHard = cardioHardMin / 60;

    const weekKcal =
      (MET_STRENGTH * weightKg * hoursStrength) +
      (MET_CARDIO_MOD * weightKg * hoursMod) +
      (MET_CARDIO_HARD * weightKg * hoursHard);

    return weekKcal / 7;
  }

  function syncRangeAndNumber(rangeEl, numberEl){
    rangeEl.addEventListener("input", () => {
      numberEl.value = rangeEl.value;
      recalc();
    });
    numberEl.addEventListener("input", () => {
      const v = Number(numberEl.value);
      const min = Number(rangeEl.min);
      const max = Number(rangeEl.max);
      rangeEl.value = String(clamp(v, min, max));
      recalc();
    });
  }

  function hrRanges(age){
    const hrMax = 220 - age;
    const modLo = round(hrMax * 0.60);
    const modHi = round(hrMax * 0.70);
    const hardLo = round(hrMax * 0.75);
    const hardHi = round(hrMax * 0.90);
    return { hrMax, modLo, modHi, hardLo, hardHi };
  }

  // UI: Sex
  $("sexM").addEventListener("click", () => {
    sex = "m";
    $("sexM").classList.add("active");
    $("sexF").classList.remove("active");
    recalc();
  });
  $("sexF").addEventListener("click", () => {
    sex = "f";
    $("sexF").classList.add("active");
    $("sexM").classList.remove("active");
    recalc();
  });

  // UI: Mode
  $("modeDef").addEventListener("click", () => {
    mode = "def";
    $("modeDef").classList.add("active");
    $("modeTime").classList.remove("active");
    $("deficitBlock").style.display = "block";
    $("timeBlock").style.display = "none";
    recalc();
  });
  $("modeTime").addEventListener("click", () => {
    mode = "time";
    $("modeTime").classList.add("active");
    $("modeDef").classList.remove("active");
    $("deficitBlock").style.display = "none";
    $("timeBlock").style.display = "block";
    recalc();
  });

  // Inputs recalc
  ["age","height","weight","goal","steps","strengthMin","cardioModMin","cardioHardMin"].forEach(id => {
    $(id).addEventListener("input", recalc);
    $(id).addEventListener("change", recalc);
  });

  // Sync sliders
  syncRangeAndNumber($("defSlider"), $("defInput"));
  syncRangeAndNumber($("fatSlider"), $("fatInput"));
  syncRangeAndNumber($("weeksSlider"), $("weeksInput"));

  function recalc(){
    // Inputs
    const age = clamp(Number($("age").value || 0), 10, 99);
    const h = clamp(Number($("height").value || 0), 120, 230);
    const w = clamp(Number($("weight").value || 0), 35, 250);
    const goal = clamp(Number($("goal").value || 0), 35, 250);
    const steps = clamp(Number($("steps").value || 0), 0, 40000);

    const strengthMin = clamp(Number($("strengthMin").value || 0), 0, 2000);
    const cardioModMin = clamp(Number($("cardioModMin").value || 0), 0, 2000);
    const cardioHardMin = clamp(Number($("cardioHardMin").value || 0), 0, 2000);

    // Fett-Faktor: 0.0 bis 3.0 g/kg
    const fatFactor = clamp(Number($("fatInput").value || 0.9), 0, 3);

    // Pulsbereiche anzeigen
    const hr = hrRanges(age);
    $("hrMod").textContent  = `(${hr.modLo}‚Äì${hr.modHi} bpm)`;
    $("hrHard").textContent = `(${hr.hardLo}‚Äì${hr.hardHi} bpm)`;

    // Core components
    const bmr = mifflinBMR(sex, w, h, age);
    const neat = neatFromSteps(steps, w);
    const eat = eatFromTraining(w, strengthMin, cardioModMin, cardioHardMin);

    const tdee = bmr + neat + eat;        // ohne TEF
    const tef = TEF_RATE * tdee;          // fix 10%
    const tee = tdee + tef;               // mit TEF

    // Goal calculation
    const diffKg = w - goal; // >0: abnehmen
    const warn = [];

    let deficit = 0;
    let weeks = 0;

    if (mode === "def"){
      deficit = clamp(Number($("defInput").value || 0), 0, 1200);
      if (diffKg > 0 && deficit > 0){
        const days = (diffKg * 7700) / deficit;
        weeks = days / 7;
      } else {
        weeks = 0;
      }
      $("defSlider").value = String(deficit);
      $("defInput").value = String(deficit);
    } else {
      weeks = clamp(Number($("weeksInput").value || 12), 1, 104);
      const days = weeks * 7;
      if (diffKg > 0){
        deficit = (diffKg * 7700) / days;
      } else {
        deficit = 0;
      }
      deficit = clamp(deficit, 0, 1200);

      $("weeksSlider").value = String(weeks);
      $("weeksInput").value = String(weeks);
      $("defSlider").value = String(round(deficit / 25) * 25);
      $("defInput").value = String(round(deficit / 25) * 25);
      deficit = clamp(Number($("defInput").value), 0, 1200);
    }

    const target = tee - deficit;

    // Warnings
    if (goal > w) warn.push("Wunschgewicht liegt √ºber aktuellem Gewicht.");
    if (target < 1200) warn.push("Kalorienziel < 1200 kcal/Tag.");
    if (deficit > 900) warn.push("Defizit > 900 kcal/Tag.");

    const warnBox = $("warnBox");
    if (warn.length){
      warnBox.style.display = "block";
      warnBox.textContent = "‚ö†Ô∏è " + warn.join(" ");
    } else {
      warnBox.style.display = "none";
      warnBox.textContent = "";
    }

    // Macros
    const proteinG = 2.0 * w;
    const fatG = fatFactor * w;

    const proteinCals = proteinG * 4;
    const fatCals = fatG * 9;

    const carbCals = Math.max(0, target - proteinCals - fatCals);
    const carbsG = carbCals / 4;

    // Render KPIs
    $("bmrKpi").textContent  = `${fmt(round(bmr))} kcal`;
    $("neatKpi").textContent = `${fmt(round(neat))} kcal`;
    $("eatKpi").textContent  = `${fmt(round(eat))} kcal`;
    $("tdeeKpi").textContent = `${fmt(round(tdee))} kcal`;
    $("tefKpi").textContent  = `${fmt(round(tef))} kcal`;
    $("teeKpi").textContent  = `${fmt(round(tee))} kcal`;

    $("bmrPill").textContent  = `üî• BMR: ${fmt(round(bmr))} kcal`;
    $("neatPill").textContent = `üßç NEAT: ${fmt(round(neat))} kcal`;
    $("eatPill").textContent  = `üèãÔ∏è EAT: ${fmt(round(eat))} kcal`;

    $("targetLine").textContent = `${fmt(round(target))} kcal/Tag`;
    const targetPct = tee > 0 ? clamp((target / tee) * 100, 0, 120) : 0;
    $("targetFill").style.width = `${targetPct}%`;

    $("macroCalsLine").textContent = `${fmt(round(target))} kcal/Tag`;
    $("pPill").textContent = `ü•© Eiwei√ü: ${fmt(round(proteinG))} g`;
    $("fPill").textContent = `ü•ë Fett: ${fmt(round(fatG))} g`;
    $("cPill").textContent = `üçû KH: ${fmt(round(carbsG))} g`;

    $("pCal").textContent = `${fmt(round(proteinCals))} kcal`;
    $("fCal").textContent = `${fmt(round(fatCals))} kcal`;
    $("cCal").textContent = `${fmt(round(carbCals))} kcal`;

    const pPct = target > 0 ? clamp((proteinCals / target) * 100, 0, 100) : 0;
    const fPct = target > 0 ? clamp((fatCals / target) * 100, 0, 100) : 0;
    const cPct = target > 0 ? clamp((carbCals / target) * 100, 0, 100) : 0;
    $("pFill").style.width = `${pPct}%`;
    $("fFill").style.width = `${fPct}%`;
    $("cFill").style.width = `${cPct}%`;

    // Big time
    if (diffKg > 0 && deficit > 0){
      const days = (diffKg * 7700) / deficit;
      const wks = days / 7;
      const months = days / 30.44;

      if (mode === "def"){
        $("bigTimeLabel").textContent = "Zeit bis Wunschgewicht";
        $("bigTimeValue").textContent = `${fmt(round(wks))} Wochen (~${fmt(round(months))} Monate)`;
      } else {
        $("bigTimeLabel").textContent = "N√∂tiges Defizit";
        $("bigTimeValue").textContent = `${fmt(round(deficit))} kcal/Tag`;
      }
    } else {
      if (mode === "time"){
        $("bigTimeLabel").textContent = "N√∂tiges Defizit";
        $("bigTimeValue").textContent = "‚Äì";
      } else {
        $("bigTimeLabel").textContent = "Zeit bis Wunschgewicht";
        $("bigTimeValue").textContent = "‚Äì";
      }
    }
  }

  recalc();
</script>
</body>
</html>
